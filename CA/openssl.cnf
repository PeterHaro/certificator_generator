[ ca ]
# `man ca`
default_ca = CA_default

[ CA_default ]
# Directory and file locations.
dir               = .
certs             = $dir/CA/certs
crl_dir           = $dir/CA/crl
new_certs_dir     = $dir/CA/newcerts
database          = $dir/CA/index.txt
serial            = $dir/CA/serial
RANDFILE          = $dir/CA/private/.rand

# The root key and root certificate.
private_key       = $dir/CA/private/cakey.pem
certificate       = $dir/CA/private/cacert.pem

# For certificate revocation lists.
crlnumber         = $dir/CA/crlnumber
crl               = $dir/CA/crl/ca.crl.pem
crl_extensions    = crl_ext
default_crl_days  = 30

default_days     = 1095          # how long to certify for (3 years=1095)
default_crl_days = 2             # how long before next CRL
default_md       = sha256        # use public key default MD
preserve         = no            # keep passed DN ordering

name_opt          = ca_default
cert_opt          = ca_default
default_days      = 375
preserve          = no
policy            = policy_loose

x509_extensions  = ca_extensions # The extensions to add to the cert
email_in_dn      = no            # Don't concat the email in the DN
copy_extensions  = copy          # Required to copy SANs from CSR to cert
unique_subject   = no            # Set to 'no' to allow creation of
                                 # several certificates with same subject.

crl_extensions   = crl_ext       # Extensions to add to a CRL



####################################################################
[ req ]
default_bits        = 4096
default_keyfile     = cakey.pem
distinguished_name  = ca_distinguished_name
x509_extensions     = ca_extensions
string_mask         = utf8only

####################################################################
[ ca_distinguished_name ]
countryName                     = Country Name (2 letter code)
stateOrProvinceName             = State or Province Name (full name)
localityName                    = Locality Name (eg, city)
organizationName                = Organization Name (eg, company)
organizationalUnitName          = Organizational Unit (eg, division)
commonName                      = Common Name (e.g. server FQDN or YOUR name)
emailAddress                    = Email Address

countryName_default             = GB
stateOrProvinceName_default     =
localityName_default            =
organizationName_default        = Iris Service Provider
organizationalUnitName_default  =
commonName_default              = irisca1
emailAddress_default            =

####################################################################
[ ca_extensions ]

subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid:always, issuer
basicConstraints = critical, CA:true
keyUsage = keyCertSign, cRLSign

####################################################################
[ policy_strict ]
# The root CA should only sign intermediate certificates that match.
# See the POLICY FORMAT section of `man ca`.
countryName             = match
stateOrProvinceName     = match
organizationName        = match
organizationalUnitName  = optional
commonName              = supplied
emailAddress            = optional

[ signing_policy_air ]
countryName             = optional
stateOrProvinceName     = optional
localityName            = optional
organizationName        = optional
organizationalUnitName  = optional
commonName              = supplied
emailAddress            = optional

[ signing_policy_gnd ]
countryName             = optional
stateOrProvinceName     = optional
localityName            = optional
organizationName        = optional
organizationalUnitName  = optional
commonName              = supplied
emailAddress            = optional

[ signing_policy_ser ]
countryName             = optional
stateOrProvinceName     = optional
localityName            = optional
organizationName        = optional
organizationalUnitName  = optional
commonName              = supplied
emailAddress            = optional
serialNumber            = supplied

[ policy_loose ]
# See the POLICY FORMAT section of the `ca` man page.
countryName             = optional
stateOrProvinceName     = optional
localityName            = optional
organizationName        = optional
organizationalUnitName  = optional
commonName              = supplied
emailAddress            = optional

####################################################################
[ signing_req ]
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer
basicConstraints = CA:FALSE
keyUsage = digitalSignature, keyEncipherment

[ signing_gnd ]
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer
basicConstraints = CA:FALSE
keyUsage = digitalSignature, keyEncipherment
extendedKeyUsage=1.3.6.1.4.1.842.9999.2

[ signing_air ]
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid,issuer
basicConstraints = CA:FALSE
keyUsage = digitalSignature, keyEncipherment
extendedKeyUsage=1.3.6.1.4.1.842.9999.1

[ v3_intermediate_ca ]
# Extensions for a typical intermediate CA (`man x509v3_config`).
subjectKeyIdentifier = hash
authorityKeyIdentifier = keyid:always,issuer
basicConstraints = critical, CA:true, pathlen:0
keyUsage = critical, digitalSignature, cRLSign, keyCertSign

####################################################################
[ crl_ext ]
# CRL extensions
authorityKeyIdentifier=keyid:always
